{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "request": {
            "$id": "#request",
            "type": "object",
            "properties": {
                "url": {
                    "$ref": "sources.json#/definitions/url"
                },
                "baseUrl": {
                    "$ref": "sources.json#/definitions/baseUrl"
                },
                "encodeUrl": {
                    "type": "boolean",
                    "default": true,
                    "description": "This directive controls the encoding of URLs. It is on by default, so if you have any special characters in your URL, they will be automatically encoded. But there might be situations where you donâ€™t want your URL to be encoded automatically, or you want to control what parts of the URL are encoded. To do this, set this flag to false."
                },
                "method": {
                    "$ref": "sources.json#/definitions/method"
                },
                "headers": {
                    "$ref": "sources.json#/definitions/headers"
                },
                "qs": {
                    "$ref": "sources.json#/definitions/qs"
                },
                "ca": {
                    "type": "string",
                    "description": "Custom Certificate Authority"
                },
                "body": {
                    "$ref": "sources.json#/definitions/body"
                },
                "type": {
                    "$ref": "sources.json#/definitions/request-type"
                },
                "temp": {
                    "$ref": "sources.json#/definitions/temp"
                },
                "condition": {
                    "default": true,
                    "description": "This directive specifies whether to execute the request or not.",
                    "oneOf": [
                        {
                            "type": [
                                "boolean",
                                "string"
                            ]
                        },
                        {
                            "type": "object",
                            "properties": {
                                "condition": {
                                    "type": "string"
                                },
                                "default": {
                                    "type": [
                                        "object",
                                        "array",
                                        "boolean",
                                        "integer",
                                        "null",
                                        "number",
                                        "string"
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    ]
                },
                "aws": {
                    "description": "Amazon Web Services signature",
                    "type": "object",
                    "properties": {
                        "key": {
                            "type": "string"
                        },
                        "secret": {
                            "type": "string"
                        },
                        "session": {
                            "type": "string"
                        },
                        "bucket": {
                            "type": "string"
                        },
                        "sign_version": {
                            "type": "string",
                            "default": "2",
                            "enum": [
                                "2",
                                "4"
                            ]
                        }
                    },
                    "additionalProperties": false
                },
                "followRedirects": {
                    "description": "This directive specifies whether to follow GET HTTP 3xx responses as redirects or never.",
                    "type": "boolean",
                    "default": true
                },
                "followAllRedirects": {
                    "description": "This directive specifies whether to follow non-GET HTTP 3xx responses as redirects or never.",
                    "type": "boolean",
                    "default": true
                },
                "oauth": {
                    "$ref": "sources.json#/definitions/oauth-1"
                },
                "pagination": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "mergeWithParent": {
                            "type": "boolean",
                            "default": true
                        },
                        "url": {
                            "$ref": "sources.json#/definitions/url"
                        },
                        "method": {
                            "$ref": "sources.json#/definitions/method"
                        },
                        "headers": {
                            "$ref": "sources.json#/definitions/headers"
                        },
                        "qs": {
                            "$ref": "sources.json#/definitions/qs"
                        },
                        "body": {
                            "$ref": "sources.json#/definitions/body"
                        },
                        "condition": {
                            "type": [
                                "boolean",
                                "string"
                            ]
                        }
                    }
                },
                "response": {
                    "description": "This directive specifies how to parse the data received from the server.",
                    "type": "object",
                    "properties": {
                        "type": {
                            "oneOf": [
                                {
                                    "type": "object",
                                    "patternProperties": {
                                        "^(\\*|[0-9][0-9][0-9]\\-[0-9][0-9][0-9]|[0-9][0-9][0-9])$": {
                                            "$ref": "sources.json#/definitions/response-type"
                                        }
                                    },
                                    "additionalProperties": false
                                },
                                {
                                    "$ref": "sources.json#/definitions/response-type"
                                }
                            ]
                        },
                        "valid": {
                            "type": [
                                "boolean",
                                "string"
                            ],
                            "default": true
                        },
                        "limit": {
                            "type": [
                                "number",
                                "string"
                            ]
                        },
                        "error": {
                            "oneOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "type": {
                                            "$ref": "sources.json#/definitions/error-type"
                                        }
                                    },
                                    "patternProperties": {
                                        "^([0-9][0-9][0-9])$": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "$ref": "sources.json#/definitions/error-type"
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ],
                                            "additionalProperties": false
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ],
                                    "additionalProperties": false
                                }
                            ]
                        },
                        "iterate": {
                            "oneOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "container": {
                                            "type": "string"
                                        },
                                        "condition": {
                                            "type": [
                                                "string",
                                                "boolean"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "container"
                                    ],
                                    "additionalProperties": false
                                }
                            ]
                        },
                        "temp": {
                            "$ref": "sources.json#/definitions/temp"
                        },
                        "output": {
                            "type": [
                                "object",
                                "array",
                                "boolean",
                                "integer",
                                "null",
                                "number",
                                "string"
                            ]
                        },
                        "trigger": {
                            "type": "object",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "date",
                                        "id"
                                    ]
                                },
                                "order": {
                                    "type": "string",
                                    "enum": [
                                        "asc",
                                        "desc"
                                    ]
                                },
                                "id": {
                                    "type": "string"
                                },
                                "date": {
                                    "type": "string"
                                }
                            },
                            "required": [
                                "type",
                                "order",
                                "id",
                                "date"
                            ],
                            "additionalProperties": false
                        },
                        "data": {
                            "type": "object",
                            "description": "The data directive saves data to the connection so that it can be later accessed from a module through the connection variable."
                        },
                        "metadata": {
                            "type": "object",
                            "properties": {
                                "value": {
                                    "type": "string",
                                    "maxLength": 512
                                },
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "text",
                                        "email"
                                    ]
                                }
                            },
                            "additionalProperties": false
                        },
                        "uid": {
                            "type": [
                                "string",
                                "number"
                            ]
                        },
                        "oauth": {
                            "$ref": "sources.json#/definitions/oauth-1"
                        }
                    },
                    "additionalProperties": false
                }
            },
            "if": {
                "required": [
                    "method"
                ],
                "properties": {
                    "method": {
                        "enum": [
                            "POST",
                            "PUT",
                            "PATCH",
                            "DELETE"
                        ]
                    }
                }
            },
            "then": {
                "required": [
                    "url",
                    "body"
                ]
            },
            "required": [
                "url"
            ],
            "additionalProperties": false
        }
    },
    "oneOf": [
        {
            "$ref": "#/definitions/request"
        },
        {
            "type": "array",
            "items": {
                "$ref": "#/definitions/request"
            }
        }
    ]
}